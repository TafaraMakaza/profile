<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tafara Makaza's Portfolio - Explorer of galaxies and technology">
    
    <title>Tafara Makaza</title>
    
    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://calendar.google.com/calendar/scheduling-button-script.css">
    
    <!-- Scripts -->
    <script src="https://calendar.google.com/calendar/scheduling-button-script.js" defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js" defer></script>
    <script src="particles.js" defer></script>
    <script src="app.js" defer></script>
</head>

<body>
    <div id="particles-js">
        <div id='body'>
            <div id='body2'>
                <header>
                    <h1>The future is written in code</h1>
                </header>
                
                <main class="laptop">
                    <div class="content">
                        <div id="code">
                            <div id="shell" role="main" aria-label="Command interface">
                                <p>üëã Hey there, Welcome to my digital hideout.</p>
                                <p>üöÄ I'm Tafara‚Äîan explorer of both galaxies and technology.</p>
                                <p>üåç My work has connected me with innovators, entrepreneurs, and changemakers worldwide.</p>
                                <p>üì¨ Want to connect? Type In: <br> 
                                    <strong aria-label="Available commands">
                                        'github' || 'linkedin' || 'twitter' || 'facebook' || 'email' || 'whatsapp'
                                    </strong>
                                </p>
                                
                                <input 
                                    type="text" 
                                    id="cmd" 
                                    aria-label="Command input"
                                    placeholder="Type a command..."
                                    autocomplete="off"
                                    style="font-family:'Monaco', 'Courier New'; color:#ffffff; background-color:#383737; border:0px">
                                
                                <div id="google-calendar-button" aria-label="Schedule meeting"></div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <!-- Separated JavaScript -->
    <script>
    // Command handler initialization
    document.addEventListener('DOMContentLoaded', function() {
        const cmdInput = document.getElementById('cmd');
        if (cmdInput) {
            cmdInput.addEventListener('keydown', function(event) {
                if (event.keyCode === 13) {
                    handleCommand(this.value);
                }
            });
        }

        // Initialize Google Calendar Button
        const target = document.getElementById('google-calendar-button');
        if (target && window.calendar && window.calendar.schedulingButton) {
            window.calendar.schedulingButton.load({
                url: 'https://calendar.google.com/calendar/appointments/schedules/AcZssZ20Ipkzb7jfqhRFBpwujOh7Q2qXlvXRZrE0TgmrHgh3gKZaFggrLvC-KnC1PdHtrifZ5W1ElNdd?gv=true',
                color: '#039BE5',
                label: 'Book an appointment',
                target: target
            });
        }
    });

    // Command handler function
    function handleCommand(command) {
        if (!command) return;
        
        const commands = {
            'facebook': 'https://www.facebook.com/tafara.makaza.5',
            'twitter': 'https://twitter.com/captain_zim/',
            'linkedin': 'https://www.linkedin.com/in/tafara-makaza-99529a127/',
            'github': 'https://github.com/TafaraMakaza',
            'email': 'mailto:tm6@williams.edu',
            'whatsapp': 'https://wa.me/+263784526338'
        };

        const sanitizedCommand = command.toLowerCase().trim();
        const url = commands[sanitizedCommand];

        if (url) {
            // Security enhancement: Add noopener and noreferrer
            window.open(url, '_blank', 'noopener,noreferrer');
        } else {
            // Error handling for invalid commands
            console.log('Invalid command: ' + sanitizedCommand);
        }

        // Reset command input
        document.getElementById('cmd').value = '';
    }

    // Initialize particles
    document.addEventListener('DOMContentLoaded', function() {
        if (window.particlesJS) {
            particlesJS('particles-js', {
                // Your particles configuration here
            });
        }
    });
    </script>
</body>
</html>
